# Cloudflare Workers 配置文件
# GLM-5 部署配置

name = "glm5-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# 账号 ID (可选，部署时会自动检测)
# account_id = "your_account_id"

# Worker 配置
[vars]
ENVIRONMENT = "production"

# 开发环境配置
[dev]
port = 8787
local_protocol = "http"

# 生产环境配置
[env.production]
name = "glm5-api-prod"

# 预发环境配置
[env.staging]
name = "glm5-api-staging"

# 限制配置
[limits]
cpu_ms = 50000  # CPU 时间限制 (毫秒)

# 路由配置 (可选)
# [[routes]]
# pattern = "api.yourdomain.com/*"
# zone_name = "yourdomain.com"

# KV 命名空间绑定 (可选，用于缓存或会话存储)
# [[kv_namespaces]]
# binding = "CACHE"
# id = "your_kv_namespace_id"

# D1 数据库绑定 (可选)
# [[d1_databases]]
# binding = "DB"
# database_name = "glm5-db"
# database_id = "your_database_id"

# 机密环境变量 (通过 wrangler secret put 设置)
# NVIDIA_API_KEY - NVIDIA NIM API Key
